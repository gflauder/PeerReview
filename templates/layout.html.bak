{% if req.lang == 'fr' %}
    {% use 'fr/blocks.html' %}
{% else %}
    {% use 'en/blocks.html' %}
{% endif %}
{% import 'lib.twig' as lib %}

{% block head %}
<!DOCTYPE html>
<html lang="{{ req.lang }}">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <meta id="appname" name="apple-mobile-web-app-title" content="{{ config.global.name }}">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.1/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css">
    <link rel="stylesheet" href="/client.css?CSSBUILDNUM=1726517254315829480" type="text/css">
    <script src="/client.js?JSBUILDNUM=1726201894215427331" type="text/javascript"></script>
    <style>
        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 56px; /* Adjust this value to match the height of your top navigation */
            bottom: 0;
            left: 0;
            z-index: 1000;
            width: 250px; /* Fixed width for sidebar */
            padding: 20px;
            overflow-x: hidden;
            overflow-y: auto;
            background-color: #f5f5f5;
            border-right: 1px solid #eee;
            transition: width 0.3s;
        }

        .sidebar.collapsed {
            width: 80px; /* Width for collapsed sidebar */
        }

        .sidebar .nav-item .nav-link {
            display: flex;
            align-items: center;
        }

        .sidebar .nav-item .nav-link .icon {
            margin-right: 10px;
        }

        .sidebar.collapsed .nav-item .nav-link .text {
            display: none;
        }

        /* Top Navigation */
        .top-navigation {
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1001;
        }

        /* Main content */
        .main-content {
            margin-left: 250px; /* Same width as sidebar */
            padding: 20px;
            transition: margin-left 0.3s;
            display: flex;
            flex-direction: column;
            min-height: calc(100vh - 56px); /* Full height minus top navigation */
        }

        .main-content.collapsed {
            margin-left: 80px; /* Adjust margin for collapsed sidebar */
        }

        .main-content > footer {
            margin-top: auto; /* Push footer to the bottom */
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: sticky;
            }
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
{% endblock %}

<body>
{% block body %}

    {% if req.redirect %}
        <meta http-equiv="refresh"
              content="{% if config.global.debug %}5{% else %}0{% endif %}; url={{ req.redirect }}">
    {% endif %}

    <nav>
        {% include 'components/top_navigation.html' %}
    </nav>

    {% if session.identified %}
    <div class="sidebar">
        {% include 'components/side_bar.html' %}
    </div>
    {% endif %}

    <div class="main-content">
        {% if session.identified %}
            {% include 'components/breadcrumb.html' %}
        {% endif %}

        {% include 'components/return_statuses.html' %}
        {% if req.warnings|length > 0 %}
            {% for warning in req.warnings %}
                {{ lib.warning(warning[0], warning[1], warning[2]) }}
            {% endfor %}
        {% endif %}

        {% include 'components/flash_messages.html' %}
        <footer>
            {% include 'components/footer.html' %}
        </footer>
    </div>

{% endblock %}
</body>

</html>